# 🚀 部署检查清单

在部署到生产环境之前，请确保完成以下所有检查项。

## 📋 部署前检查

### 代码准备
- [ ] 所有代码已提交到 Git
- [ ] `npm run build` 本地构建成功
- [ ] `npm run lint` 无错误
- [ ] 所有测试通过
- [ ] 删除了调试代码和 console.log

### 环境配置
- [ ] `.env.local` 文件已创建（本地）
- [ ] `.env.local` 已添加到 `.gitignore`
- [ ] API_SECRET_KEY 已更改为强密码
- [ ] JWT_SECRET 已更改为强密码
- [ ] 所有敏感信息已移除

### 内容准备
- [ ] 已准备初始文章内容
- [ ] 图片已优化（压缩、正确尺寸）
- [ ] 多语言翻译已完成
- [ ] 联系信息已更新

## 🔧 Vercel 部署检查

### 账户设置
- [ ] Vercel 账户已创建
- [ ] 已连接 GitHub/GitLab（如使用 Git 部署）
- [ ] 团队设置已配置（如适用）

### 项目配置
- [ ] 项目名称已设置
- [ ] Framework Preset: Next.js
- [ ] Build Command: `npm run build`
- [ ] Output Directory: `.next`
- [ ] Install Command: `npm install`

### 环境变量（重要！）
- [ ] API_SECRET_KEY 已设置（生产环境）
- [ ] JWT_SECRET 已设置（生产环境）
- [ ] NEXT_PUBLIC_SITE_URL 已设置
- [ ] 所有环境变量已保存
- [ ] 已重新部署以应用环境变量

### 域名设置
- [ ] 自定义域名已添加（如需要）
- [ ] DNS 记录已正确配置
- [ ] SSL 证书已自动配置
- [ ] HTTPS 重定向已启用

## 🔌 n8n 集成检查

### n8n 准备
- [ ] n8n 实例已安装并运行
- [ ] n8n 可以访问互联网
- [ ] 已获取 n8n 的访问权限

### 工作流配置
- [ ] 工作流已导入或创建
- [ ] API URL 已更新为 Vercel URL
- [ ] API 密钥已正确配置
- [ ] 触发器已设置（定时/Webhook）
- [ ] 错误处理已配置

### 测试
- [ ] 手动执行工作流测试成功
- [ ] API 返回正确的响应
- [ ] 文章成功发布到网站
- [ ] 多语言发布测试通过

## ✅ 功能测试

### 网站功能
- [ ] 首页加载正常
- [ ] 所有导航链接工作
- [ ] 多语言切换功能正常
- [ ] 响应式设计在移动端正常
- [ ] 所有页面无404错误

### API 功能
- [ ] GET /api/posts 返回文章列表
- [ ] POST /api/posts 可以创建文章
- [ ] PUT /api/posts/[id] 可以更新文章
- [ ] DELETE /api/posts/[id] 可以删除文章
- [ ] 未授权请求返回 401
- [ ] 错误处理正常工作

### 内容展示
- [ ] 文章列表正确显示
- [ ] 文章详情页正常
- [ ] 图片正确加载
- [ ] Markdown 渲染正确
- [ ] 日期格式正确显示

## 🔒 安全检查

### API 安全
- [ ] API 密钥足够强（至少32字符）
- [ ] 密钥未在代码中硬编码
- [ ] 密钥未提交到 Git
- [ ] 未使用默认密钥
- [ ] 考虑启用 IP 白名单（可选）

### 网站安全
- [ ] HTTPS 已启用
- [ ] 安全响应头已配置
- [ ] XSS 防护已启用
- [ ] CSRF 防护已考虑
- [ ] 输入验证已实现

### 数据安全
- [ ] 敏感数据已加密
- [ ] 备份策略已制定
- [ ] 访问日志已启用
- [ ] 错误日志不暴露敏感信息

## 📊 性能检查

### 加载性能
- [ ] 首页加载时间 < 3秒
- [ ] 图片已优化和懒加载
- [ ] 静态资源已缓存
- [ ] 使用了 CDN（Vercel 自带）
- [ ] Lighthouse 得分 > 90

### SEO 优化
- [ ] Meta 标签已设置
- [ ] robots.txt 已配置
- [ ] Sitemap 已生成（可选）
- [ ] 结构化数据已添加（可选）
- [ ] Open Graph 标签已添加

## 📈 监控和分析

### 监控设置
- [ ] Vercel Analytics 已启用（可选）
- [ ] 错误追踪已配置（可选）
- [ ] 性能监控已设置
- [ ] 告警通知已配置

### 日志
- [ ] 部署日志可访问
- [ ] 函数日志可查看
- [ ] 错误日志已记录
- [ ] 访问日志已启用（可选）

## 📝 文档检查

### 技术文档
- [ ] README.md 已更新
- [ ] API 文档已完善
- [ ] 部署文档已创建
- [ ] n8n 配置文档已准备

### 用户文档
- [ ] 使用指南已编写（可选）
- [ ] FAQ 已准备
- [ ] 故障排除指南已创建
- [ ] 联系方式已提供

## 🔄 持续集成

### Git 工作流
- [ ] 主分支受保护
- [ ] PR 审核流程已建立
- [ ] 自动部署已配置
- [ ] 回滚流程已测试

### 版本管理
- [ ] 版本号已更新
- [ ] 变更日志已记录
- [ ] Release notes 已准备
- [ ] Tag 已创建

## 🎯 上线后检查

### 立即检查（部署后5分钟内）
- [ ] 网站可以正常访问
- [ ] 所有页面加载正常
- [ ] API 响应正常
- [ ] 没有明显错误

### 短期检查（部署后1小时内）
- [ ] 监控数据正常
- [ ] 没有异常错误报告
- [ ] 性能指标正常
- [ ] n8n 工作流正常执行

### 长期检查（部署后24小时内）
- [ ] 没有用户投诉
- [ ] 服务器资源使用正常
- [ ] 备份正常运行
- [ ] 所有定时任务正常

## 📞 紧急联系

### 问题升级路径
1. 检查 Vercel 仪表板
2. 查看部署日志
3. 联系团队成员
4. 提交支持工单

### 回滚计划
- [ ] 回滚步骤已文档化
- [ ] 回滚权限已分配
- [ ] 回滚测试已完成
- [ ] 通知流程已建立

---

## ✨ 最终确认

在点击 "部署到生产" 按钮之前：

**我确认：**
- [ ] 所有上述检查项已完成
- [ ] API 密钥已更改为生产环境密钥
- [ ] 所有测试已通过
- [ ] 团队成员已通知
- [ ] 备份已完成
- [ ] 回滚计划已准备

**签名：** ________________  **日期：** ________________

---

🎉 **恭喜！准备好部署了！**

```bash
# 执行部署命令
vercel --prod
```

祝您部署顺利！🚀
